<!-- commandes/livraison_list.html -->
{% extends "layout.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
  <h1>Liste des bons de livraison</h1>
  
  <table class="table table-striped table-hover">
    <thead class="thead-dark">
      <tr>
        <th>Numéro BL</th>
        <th>Commande associée</th>
        <th>Date livraison</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for livraison in livraisons %}
      <tr>
        <td>{{ livraison.numero_bl }}</td>
        <td>{{ livraison.commande.numero_commande }}</td>
        <td>{{ livraison.date_livraison|date:"d/m/Y H:i" }}</td>
        <td>
          <span class="badge badge-{% if livraison.est_complet %}success{% else %}warning{% endif %}">
            {% if livraison.est_complet %}Terminé{% else %}En attente{% endif %}
          </span>
        </td>
        <td>
          <a href="{% url 'pharmacies:livraison_detail' livraison.pk %}" 
             class="btn btn-sm btn-info"
             title="Détails">
            <i class="fas fa-eye"></i>
          </a>
          {% if not livraison.est_complet %}
          <a href="{% url 'pharmacies:livraison_valider' livraison.pk %}" 
             class="btn btn-sm btn-success"
             title="Marquer comme terminée">
            <i class="fas fa-check"></i>
          </a>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center">Aucun bon de livraison trouvé</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  {% include 'includes/pagination.html' %}
</div>
{% endblock %}